{"<!--m5oinat071.04423750682764-->":"<?php\r\nrequire_once 'system/db.inc.php';\r\n$id = (int)@$_GET['id'];\r\n$clubinfo = getClubInfo($id);\r\n$matches = getFutureMatches($id);\r\n$bestuur= getManagement($id);\r\n$sfeerfoto=getSfeerFoto($id);\r\n$locatie = getClubInfo($id);\r\n$latitude = getClubInfo($id)['latitude']; // deze in url zetten van google maps\r\n$longitude = getClubInfo($id)['longitude']; // deze in url zetten van google maps\r\n$socials = getSocials($id);\r\n$maxID = maxID();\r\nfunction getClubInfo(int $id): array|bool\r\n{ \r\n  \r\n    $sql = \"SELECT * FROM clubs\r\n    -- left join external_references on clubs.id = external_references.club_id\r\n    -- left join reference_types on external_references.reference_type_id = reference_types.id \r\n    -- bovenstaande 2 rgels werken niet, name wordt dan main url\r\n    WHERE clubs.id = :id;\";\r\n\r\n    $stmt = connectToDatabase()->prepare($sql);\r\n    $stmt->execute([\r\n        \":id\" => $id\r\n    ]);\r\n   \r\n    return $stmt->fetch(PDO::FETCH_ASSOC);\r\n}\r\n\r\nfunction getClubUrl(int $id): array|bool\r\n{ \r\n  \r\n    $sql = \"SELECT * FROM clubs\r\n    left join external_references on clubs.id = external_references.club_id\r\n    left join reference_types on external_references.reference_type_id = reference_types.id \r\n    WHERE clubs.id = :id;\";\r\n\r\n    $stmt = connectToDatabase()->prepare($sql);\r\n    $stmt->execute([\r\n        \":id\" => $id\r\n    ]);\r\n   \r\n    return $stmt->fetch(PDO::FETCH_ASSOC);\r\n}\r\n\r\nfunction getFutureMatches(int $id): array|bool\r\n{ \r\n  \r\n    $sql = \"SELECT clubs.id,clubs.name as clubname, team_1_id,team_2_name as opponent, date FROM baseball.matches\r\nleft join teams on team_1_id = teams.id\r\nleft join clubs on club_id\r\nwhere date > NOW()\r\nand team_1_id = :id\r\nand clubs.id = :idc\r\norder by date asc\r\nlimit 3\";\r\n\r\n    $stmt = connectToDatabase()->prepare($sql);\r\n    $stmt->execute([\r\n        \":id\" => $id,\r\n        \":idc\" => $id,\r\n    ]);\r\n   \r\n    return $stmt->fetchAll(PDO::FETCH_ASSOC);\r\n}\r\n\r\nfunction getManagement($id){\r\n    $sql = \"SELECT role_name as role, CONCAT(firstname, ' ', lastname) as fullname  FROM baseball.management \r\nleft join management_roles on management.management_role_id = management_roles.id\r\nwhere club_id = :id\r\nand  show_on_club = 1\";\r\n    \r\n        $stmt = connectToDatabase()->prepare($sql);\r\n        $stmt->execute([\r\n            \":id\" => $id,\r\n        ]);\r\n       \r\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\r\n}\r\n\r\nfunction getSfeerFoto($id){\r\n    $sql = \"SELECT * FROM baseball.clubs\r\nleft join media on clubs.id = media.club_id\r\nwhere show_on_club = 1\r\nand club_id = :id\r\nlimit 1;\";\r\n\r\n        \r\n            $stmt = connectToDatabase()->prepare($sql);\r\n            $stmt->execute([\r\n                \":id\" => $id,\r\n            ]);\r\n           \r\n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\r\n\r\n}\r\n\r\nfunction getSocials($id){\r\n    $sql = \"select clubs.id,clubs.name as clubname ,reference as sociallink,reference_types.name as linkname,is_social   FROM clubs\r\nleft join external_references on clubs.id = external_references.club_id\r\nleft join reference_types on external_references.reference_type_id = reference_types.id\r\nwhere clubs.id = :id\r\nand is_social = 1;\";\r\n\r\n$stmt = connectToDatabase()->prepare($sql);\r\n            $stmt->execute([\r\n                \":id\" => $id,\r\n            ]);\r\n           \r\n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\r\n     \r\n}\r\n\r\nfunction maxID(){\r\n    $sql = \"SELECT max(id) as max_id FROM baseball.clubs\";\r\n    $stmt = connectToDatabase()->prepare($sql);\r\n    \r\n    // Execute the query\r\n    $stmt->execute();\r\n\r\n    // Fetch the result\r\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\r\n    // Check if 'max_id' is set in the result\r\n    if (isset($result['max_id']) && $result['max_id'] !== null) {\r\n        return (int) $result['max_id'];\r\n    } \r\n    }\r\n\r\n\r\n\r\nif($id > $maxID) {\r\n    header(\"Location:/frontend/pages/404.php\");\r\n}\r\n\r\n// print '<pre>';\r\n// print_r(getSfeerFoto($id));\r\n// print '</pre>';\r\n// exit;\r\n\r\n?>","<!--m5oinat060.963010269552086-->":"<?=$id?>","<!--m5oinat08.55421108012171-->":"<?= $clubinfo['name']?>","<!--m5oinat073.70760688934368-->":"<?= $clubinfo['name']?>","<!--m5oinat082.7211079455739-->":"<?= $clubinfo['city']?>","<!--m5oinat075.90458007288865-->":"<?= $sfeerfoto[0]['media_url']?>","<!--m5oinat016.307690375044448-->":"<?= getClubInfo($id)['name']?>","<!--m5oinat025.986512443577325-->":"<?php include('frontend/partials/header.inc.php') ?>","<!--m5oinat087.57706335952216-->":"<?= getClubInfo($id)['logo_url']?>","<!--m5oinat088.34666314624799-->":"<?= getClubInfo($id)['name']?>","<!--m5oinat077.1549198595275-->":"<?php foreach($sfeerfoto as $foto): ?>","<!--m5oinat092.7042340387455-->":"<?=$foto['media_url'] ?>","<!--m5oinat078.20002196959175-->":"<?= getClubInfo($id)['name']?>","<!--m5oinat077.53715194687562-->":"<?php endforeach ?>","<!--m5oinat024.27541242990443-->":"<?php foreach($sfeerfoto as $foto): ?>","<!--m5oinat011.925362370043736-->":"<?=$foto['media_url'] ?>","<!--m5oinat092.6512813918893-->":"<?= getClubInfo($id)['name']?>","<!--m5oinat028.81029520248346-->":"<?php endforeach ?>","<!--m5oinat023.82417433324784-->":"<?php\r\n\r\nif (!empty($socials)) {\r\n    echo '<ul>';\r\n    foreach ($socials as $social) {\r\n        \r\n        $socialLink = $social['sociallink']; \r\n        $linkName = strtolower($social['linkname']); // Convert link name to lowercase\r\n\r\n        \r\n        $iconClass = '';\r\n        switch ($linkName) {\r\n            case 'instagram':\r\n                $iconClass = 'fa-brands fa-instagram';\r\n                break;\r\n            case 'facebook':\r\n                $iconClass = 'fa-brands fa-facebook';\r\n                break;\r\n            case 'youtube':\r\n                $iconClass = 'fa-brands fa-youtube';\r\n                break;\r\n        }\r\n        echo '<li>';\r\n        echo '<a href=\"' . $socialLink . '\" target=\"_blank\">';\r\n        echo '<i class=\"' . $iconClass . '\"></i>';\r\n        echo '</a>';\r\n        echo '</li>';\r\n    }\r\n    echo '</ul>';\r\n} else {\r\n    echo \"<p>The club-owner didn't share any socials.</p>\";\r\n}\r\n?>","<!--m5oinat054.10416125050486-->":"<?= getClubUrl($id)['reference']?>","<!--m5oinat037.45828762624228-->":"<?= explode(\"www.\",getClubUrl($id)['reference'])[1] ?>","<!--m5oinat072.07958017886705-->":"<?php if(!empty(getClubInfo($id)['description'])): ?>","<!--m5oinat036.83493999686638-->":"<?= getClubInfo($id)['description'] ?>","<!--m5oinat038.532597033007086-->":"<?php endif ?>","<!--m5oinat044.282916826661655-->":"<?php foreach($bestuur as $lid): ?>","<!--m5oinat093.59624369004361-->":"<?=$lid['role']?>","<!--m5oinat083.52749697271567-->":"<?=$lid['fullname']?>","<!--m5oinat034.288912151560154-->":"<?php endforeach ?>","<!--m5oinat030.685243598168753-->":"<?= getClubInfo($id)['province']?>","<!--m5oinat035.67503998520425-->":"<?= getClubInfo($id)['zip']?>","<!--m5oinat028.737191684036635-->":"<?= getClubInfo($id)['city']?>","<!--m5oinat011.688709965997157-->":"<?= getClubInfo($id)['street']?>","<!--m5oinat099.67814289564087-->":"<?= getClubInfo($id)['address']?>","<!--m5oinat027.153940836918867-->":"<?= getClubInfo($id)['bus']?>","<!--m5oinat017.50454410813549-->":"<?php foreach($matches as $match): ?>","<!--m5oinat00.731806856481465-->":"<?= $match['date']?>","<!--m5oinat060.27683873531806-->":"<?= $match['opponent']?>","<!--m5oinat091.82105588825684-->":"<?= getClubInfo($id)['name']?>","<!--m5oinat052.537715027570876-->":"<?php endforeach ?>","<!--m5oinat053.78421418153489-->":"<?=$latitude?>","<!--m5oinat070.23989838188854-->":"<?=$longitude?>"}